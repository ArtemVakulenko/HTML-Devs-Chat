# User

## Registration
Чтобы произвести регистрацию в приложении необходимо отправить **POST** запрос по роуту ***/api/registration*** <br>
Тело запроса должно выглядеть следующим образом:
```
{
  "login":"admin",
  "password": "admin123"
}
```
Все поля обязательны. Поле логин можно вводить только латинские символы и цифры <br>
В поле пароль можно вводить латинские символы, цифры и спецсимволы<br>
Если регистрация успешна вернется ответ со статусом ***201*** 
```
{
  "message": "Вы успешно заргестрировались"
}
}
```
Если пользователь уже существует, то вернется ответ со статусом ***409***
```
{
  "message": "Такой пользователь уже существует"
}
```
Если логин или пароль введен не верно вернется ответ со статусом ***400*** и сообщениями:
```
{
 "message": "Логин должен содержать 3-18 латинских символов и/или цифр"
}
||
{
 "message": "Пароль должен содержать 5-20 латинских символов, цифр и/или спецсимволов"
}
```

## Authorization
Чтобы произвести авторизацию необходимо отправить **POST** запрос на урл /api/login, тело запроса должно выгляеть следующим образом
```
{
  "login":"admin",
  "password": "admin123"
}
```
Все поля обязательны. Поле логин можно вводить только латинские символы и цифры <br>
В поле пароль можно вводить латинские символы, цифры и спецсимволы<br>
Если логин или пароль введен не верно вернется ответ со статусом ***400*** и сообщениями:
```
{
 "message": "Логин должен содержать 3-18 латинских символов и/или цифр"
}
||
{
 "message": "Пароль должен содержать 5-20 латинских символов, цифр и/или спецсимволов"
}
```
Если авторизация прошла успешно, вернется ответ со статусом **201**
```
{
    "token": "строка с токеном",
    "userId": "строка с юзер айди"
}
```
Если логин и пароль прошли валидацию, но такого пользователя не существует, придет ответ со статусом 400 и сообщением:
```
{
    "message": "Пользователя с таким логином не существует",
}
```
Если логин и пароль прошли валидацию,пользователь с таким логинов существует, но пароли не совпадают, придет ответ со статусом 401 и сообщением:
```
{
    "message": "Неправильный пароль"
}
```

# Rooms

## Get rooms

Для получения всех комнат необходимо отправить **GET** запрос по роуту /api/room.
Ответ должен прийти со статусом ***200*** и и подобный объект:
```
message:[
  {
    "users":[  // поле юзеров которым принадлежит комната
      "60bb8e9412e5354364ef4260",
      "60c79f951ec81c2db4c09248"
    ],
    "messages":[], // сообщения в комнате
    "_id": "60c91e7a3942ab05e81a2480", //id комнаты
    "name": "chat", // название комнаты
  },
]
```

## Create room

Для создания необходимо отправить **POST** запрос по роуту /api/room.
Тело запроса должно содержать в себе
```
{
  "name": "Room 1",
  "users": [        
    "60c79f951ec81c2db4c09248",
    "60bb8e9412e5354364ef4260"
  ]
}
```
**где**: <br> 
- поле "name" - название комнаты (*обязательный параметр*)<br>
- поле "users" - массив из id юзеров которых вы хотите добавить в комнату, если его не передать, комната будет доступна только для того кто ее создал.

## Update room
Для добавления юзеров в комнату или для смены названия комнаты необходимо отправить **PUT** запрос по роуту /api/room. Тело запроса должно содержать в себе: <br>
***Для добавления юзеров***
```
{
  "roomID": "60c91e7a3942ab05e81a2480", 
  "update":[                            
    "60c79f951ec81c2db4c09248",
    "60bb8e9412e5354364ef4260"
  ],
}
```
***Для смены названия***
```
{
  "roomID": "60c91e7a3942ab05e81a2480", 
  "update": "new name",
}
```
**где**: <br> 
- поле "roomID" - id комнаты, данные которой нужно изменить<br>
- поле "update"
- - **массив** id юзеров которых нужно добавить в комнату.
- - **строка** с новым названием комнаты.

## Delete users from room
Для удаления комнаты у юзера необходимо отправить **DELETE** запрос по роуту /api/room?***id=60c91e7a3942ab05e81a2480***<br>
Где ***id*** это id комнаты из которой вы хотите выйти. Для удаления комнаты необходимо выйти из нее сем юзерам<br>
Юзера можно добавить, но нельзя удалить пока он сам не выйдет из комнаты